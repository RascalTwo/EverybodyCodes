import { describe, expect, test } from 'vitest'

function dijkstra(graph: Record<string, string[]>, ...starts: string[]) {
	const distances: Record<string, number> = {};
	for (const node in graph) {
		distances[node] = Infinity;
	}
	for (const start of starts) {
		distances[start] = 0;
	}

	const unvisited = new Set(Object.keys(graph));
	while (unvisited.size) {
		let node = null;
		for (const otherNode of unvisited) {
			if (!node || distances[otherNode] < distances[node]) node = otherNode
		}
		if (node === null) break;

		unvisited.delete(node);

		for (const neighbor of graph[node]) {
			distances[neighbor] = Math.min(distances[neighbor], distances[node] + 1)
		}
	}

	return distances;
}

type Loc = { r: number, c: number }
const PERMEABLE = '.P'

function parseWorld(notes: string) {
	const world = notes.split('\n').map(l => [...l]);

	const trees: Loc[] = [];
	for (let r = 0; r < world.length; r++) {
		for (let c = 0; c < world[r].length; c++) {
			if (world[r][c] === 'P') {
				trees.push({ r, c })
			}
		}
	}

	const graph: Record<string, string[]> = {}
	for (let r = 0; r < world.length; r++) {
		for (let c = 0; c < world[r].length; c++) {
			if (!PERMEABLE.includes(world[r][c])) {
				continue
			}

			const fromKey = r + '|' + c
			if (!(fromKey in graph)) graph[fromKey] = []

			for (const [ro, co] of [[1, 0], [-1, 0], [0, 1], [0, -1]]) {
				const [nr, nc] = [r + ro, c + co]
				if (PERMEABLE.includes(world[nr]?.[nc])) {
					graph[fromKey].push(nr + '|' + nc)
				}
			}
		}
	}

	return { graph, trees, height: world.length, width: world[0].length }
}

function getAllTreeWateredTimes(graph: Record<string, string[]>, starts: string[], trees: Loc[]) {
	const distances = dijkstra(graph, ...starts);
	return trees.map(tree => distances[tree.r + '|' + tree.c])
}

function solveQuest(notes: string, startBottomRight: boolean) {
	const { graph, trees, width, height } = parseWorld(notes)

	const starts: Loc[] = [{ r: 1, c: 0 }]
	if (startBottomRight) starts.push({ r: height - 2, c: width - 1 })

	return Math.max(...getAllTreeWateredTimes(graph, starts.map(start => start.r + '|' + start.c), trees))
}

function solveQuest3(notes: string) {
	const { graph, trees } = parseWorld(notes)

	const channelDistances: Record<string, number> = {}
	for (const tree of trees) {
		const distances = dijkstra(graph, tree.r + '|' + tree.c)
		for (const loc in distances) {
			channelDistances[loc] = (channelDistances[loc] ?? 0) + distances[loc]
		}
	}

	const start = Object.entries(channelDistances)
		.sort((a, b) => a[1] - b[1])
		.filter(entry => !trees.some(t => t.r + '|' + t.c === entry[0]))[0][0]
	return getAllTreeWateredTimes(graph, [start], trees).reduce((a, b) => a + b, 0)
}

describe('Part 1', () => {
	test('Example', () => {
		expect(solveQuest(`##########
..#......#
#.P.####P#
#.#...P#.#
##########`, false)).toBe(11)
	})

	test('Notes', () => {
		expect(solveQuest(`###############################
......#...........#...#P......#
#.###.#.#####.###.#.#.#####.#.#
#...#...#.....#P#...#...#...#.#
###.#####.#####.#######.#.###.#
#P#.#.....#P#...#.....#...#...#
#.#.#.#####.#.#.#.###.#####.###
#.#...#..P#...#.#.#...#...#.#P#
#.#####.###.###.#.#.###.#.#.#.#
#............P#...#.....#.....#
###############################`, false)).toBe(109)
	})
})

describe('Part 2', () => {
	test('Example', () => {
		expect(solveQuest(`#######################
...P..P...#P....#.....#
#.#######.#.#.#.#####.#
#.....#...#P#.#..P....#
#.#####.#####.#########
#...P....P.P.P.....P#.#
#.#######.#####.#.#.#.#
#...#.....#P...P#.#....
#######################`, true)).toBe(21)
	})

	test('Notes', () => {
		expect(solveQuest(`#########################################################################################################################################################################################################
......#...#.....#...#P#.....#.#P..P.......#P.P.....P..#...#P....#P....#P....#P#P....#......P..#.....#.........#....P#.....#..P#P.....P...PP...P..P#........P....#.#.........#...P........P#.......PP.P#.#
#.###.#.#.#.###.#.#.#.#.#.#.#.#.#######.#.###.#.#####.#.#.#.###.###.#.#.###.#.#.#.#.###.#.###.#.#.#.###.#.###.#.###.###.#.#.#.#####.#############.#.#####.#####.#.#.#####.###.#######.#####.###.#####.#.#
#..P#...#...#...#.#.#...#.#...#.#P....#.#...#.#..P..#.#P#P#...#P...P#...#..P#...#.#...#.#P#.#.#P#.#.PP#.#.#.#.#...#.#...#P#.#.....#.#..P..P..P..P.#.#.#P..#...#...#.#...#P#...#...#P#....P#.#.#...#...#.#
#.###########.###.#.#####.#####.###.#.#.###.#.#####.#.#.#.#.#.#.#########.#######.###.###.#.#.#P#.###.###.#.#.###.#.#.###.#P#####.#.#.#############.#.#.###.#.#####.#.###.#.###.#.#.#####.#.#.###.#.###.#
#.#..P.P..P..P#...#P...P#.#..P.P#...#P#.#.#.#.....#.#...#.#P#.#P#...#...#.#P.P#..P#.#.#P.P#P#P#P#.#P......#......P#.#.#...#.#P..#..P#.#...#.......#...#.PP..#.#....P#.#...#P#...#...#..P#......P#.#.#...#
#.#.###########.#.#####.#.#.#####.###.#.#.#.###.###.#####.###.###.#.#.#.#.#.#.#.###.#P#.###.#.###.#########.#######.#.#.###.#.#.#####.#.#.#.#####.###.#######.#.#####.#.###.#.#####.###.#########.#.#.#.#
#...#.......P.#.#.#...#.#....P...P#...#.#.#...#P#...#..P..#P..#...#..P#.#P..#...#.....#.#P#...#P..#..P#.....#P...P#P..#P....#.#P#P..#...#.#.#P..#.....#.....#..P#.....#.....#.#.............#....P#..P#.#
#.#######.#####.#.###.#.#.#####.#######.#.###.###.###.#####.###.#######.#########.#####.#.#.###.###.#.###.###.###.#########.#.#.###.#.#####.###.#######.#.#######.###.#######.#############.#.#.#######.#
#.......#.......#...#.#.#.#..P#P#P..#...#...#.....#P#.....#.....#P.....P#.....#.#P..PP.P#P#.#P...P..#...#P..#.#P#..P..#...#.#.#..P#P..#...#.#P......#P#.#.......#...#.........#P....#......P#P#.#P..#P..#
#######.#.#########.#.#.#.#.#.###.#.#.#####.#######.#####.#######.#######.###.#.#########.#.#########.#.#####.#.#####.#.#.#.#.###.#####.#.#.#.#####.#.#.#####.#####.#######.###.###.#.#######.###.#.#.###
#P....#.#.#..P.P...P#...#P#P#..P..#...#P.P...P.P........#....P#..P#...#.....#...#.........#....P....#P#...#...#P#P....#P#.#P#...#.....#.#.#...#P..#.#.#...#.#..P....#P....#...#.#P#.#P#P..#..P#...#P#...#
#.###.#.#.#.#########.#####.###########.#########.###########.#.###.#.#.###.#.###.#####.#.#########.###.#.#.###.#.#####.#.#.###.#####.#.#.#####.#.#.#.###.#.#########.###.###.#.#P#.#.#.###.###.###.###.#
#.#...#.#P#...#.....#...P...#...#.............#P.P#....PPP..#..P#...#..P#...#P#.....#..P#....P#P..#..P#.#...#P..#.#P.P..#.#.#..P#P..#...#P...P..#P.P#..P#...#P...P#...#P#.#.#.#.#.#.#.#...#.....#..P#..P#
#.#.###.#.###.#.###.#########.#.#.#########.#.#.###.#######.#####.#######.#####P#####.#######.###.###.#.#####.#.#.#####.#.#.#.#####.#################.#.###.###.#.#.###.#.#P#.#.#.#.#.###.#######.###.###
#.#.#...#.#...#P..#..PPP..#...#P..#.......#.#P#...#P....#....P..#P#..P..#.....#...#P..#.#..P#...#...#.#..P...P#P#....P#.#P#P#....P#...P....P......#P#.#P..#.#..P#...#...#.#P#...#.#P#..P#P.P.P#...#P#.#P#
#.###.###P#.#.#####.#####.#.#######.#####.###.###.#####.#.#######.#.###.#####.###.#.###.#.#.###.###.#.#####.#########.#.#.#.#####.#.###########.#.#.#P###.#.#.#######.#.#.#.#####.#.###.#####.#.###.#.#.#
#.....#P#P#P#.#...#.#..P#...#.....#.#...#..P..#.#P#...#.#.....PP.P#...#.....#P....#...#...#.#...#...#.....#.#P.PP..P#.#P#......P#.#P....#...#.#.#...#.#...#...#P.P#P..#P..#...#...#...#...#...#.#P....#.#
#.#####.#.#.###.#.#.#.#.#.###.###.#.#.#.#######.#.###.#.#############.###.#.#########.###.#.#.###.#.#####.#.#.#####.#.#######.###.#####.#.#.#.#.#####.#.#######.#.#.#######.#.###.###.###.#.###.#####.#.#
#..P#....P#.....#.#P#P#P#.#P..#P..#..P#.#....P#...#...#.#P.P.P..#..P#P#...#.#...#...#...#.#P#...#.#.#.#...#.#.#...#.#P......#.#P..#P..#...#P.P#P.P#...#.....P...#.#.....#...#...#..P#.#.#.#P#...#P.P#..P#
###.#######.#####.###.#.###.###.###.###.#.###.#.###.#.#.#.#####.#.#.###.###P#.#.#.#####.###.###.#.#.#.#.#####.#.###.#######.###.###.#.###.#######.#.#######.#####.#####.###.###.#.#.#.#P#.#.#.#.#.#.#####
#P..#P....#...#...#..P#...#...#.#...#...#.#...#.....#.#.#.P...#...#P....#P.P#.#P#.....#P.P#.....#.#.#P#P..#P..#...#...P...#...#P#...#...#.#.....#P.P#..P..#...#.#P.P..#...#..P#..P#.#.#.#...#P#.#.#P.P.P#
#.###.###.###.#.###.#####.###.#.###.#.###.#.#########.#.#.###.###########.###.#.###.#.###.#.#####.#.#.###.#.#####.#######.###.#.#.#####.###.###.#####.###.###.#.#####.###.###.#######.#P###.#.#.#.#####.#
#.#P.P#...#...#...#.#P..#.#P.P#...#P#P#P..#.......#...#P#...#....P#P#...#.#...#..P#P#..P#.#..P#...#...#.#.#.#.....#P#.....#...#.#..P#.#...#.#.#..P..#P..#...#...#P..#.......#.#..P#P..#.#...#.#.#.#..P..#
#.#.#####.#######.#.###.#.#.#####.#.#.#######.#.###.###.###.#####.#.#.#.#.#.#####.###.###.###.#.#####.#.#.#.#.###.#.#.#####.###.###.#.###.#.#.#####.###.###.#####.#.#######.#P#.#.#.###.#.###.###.#.#####
#.#.....#..P......#...#.#P#.#P.P#.#.#P#..P.P..#.#..P#...#.#...#P.P#...#.#...#..P#P..#.#...#..P#.....#...#.#.#...#...#.#P..#...#...#P#P..#.#P#P...P..#...#P#.#.....#....P.P#.#P#P#P..#...#.#.#P#..P#..P..#
#.#.###.#############.#.#.#.#.###.###.#.#########.###.###.###.#.#####.#.#####.#####.#.#.###.#######.###.#.#.###.###.#P#.#.###.###.#P###.#.#.###.#####.###.#.#.###########.#.#.#.#######.#.#.#.#.#######.#
#.#..P#.#.....#.......#P...P#...#P#...#.#...P.....#P#P.P#...#.#P...P#P#P....#.....#P#.#.#P#.#...#...#P..#...#P..#.#P#.#.#...#.....#.#P..#.#...#P...P#..P#P#P..#......P..#.#P..#...#P..#P....#..P#....P#.#
#.#####.#.#.###.###.#########.#.#.#.###.#.#######.#.###.#.###.#####.#.###.#.#.#.###.#.#P#.#.#.#.#.###########.###.#.#.#.###.#####.#.#.###.###.#####.###.#.#########.#####.###.###.#.#.###.#######.#####.#
#...P..P#.#P#...#P#P....#..P#P#..P#.#P#...#..P..#.....#.#..P...P#P..#...#.#P#.#P#...#.#.#P....#...#P..#...#...#....P#.#...#..P.P#...#.........#..P#...#P#.....P.....#.....#P#...#P..#...#.#P.....P#...#.#
###########.#.###.#####.###.#.#####.#.#.###.###.###.###.#########.#####.#.###.#.#.###.#.###########.#.#.#.#.#.#######.#.#.#####.#####.#########.#.###.#.#.#.###.#####.#####.###.#######.###.#.#.###.#.#.#
#..P#....P..#.#.......#..P#.#P..P..P#.....#.#.#...#P#P..#...P..P#P..#..P#...#.#...#...#P...P#P.PP...#.#.#P.P#.....#P..#P#P#..P#..P..#.....#P.P#P#......P#.#...#P#..P#.#...#.....#..P#...#...#.#P#P.P#...#
#.###.#.###.#.#.#####.###.#.#########.#####.#.###.###.###.#####.###.#######.#.#####.#.#####.#.#######P#.#########.#.#####.###.#####.###.###.#.###########.###.###.#.#.###.#.#######.#.###.###P#.#.#####.#
#..P..#...#.#..P#.....#...#.....#P.P#..P#......P#P#...#..P#...#..P.P#P......#.#.....#P#...#.#......P#.#P.P..#..P#P#.#.....#....P#..P#P#P#P..#P....#..P#...#P..#P..#.#P..#...........#P.....P#.#P#P#...#P#
#.#######.#.#####.#####.###.#.###.#.###.#.#######.#.###.#####.#######.###.###.#.#####.###.#P#####.###.#####.#.###.#.#.#####.#####.###.#.#.#.#####.#.#.#####.###.###.###.###########.#########.###.#.#.###
#...P...#.#.#.#...#...#P.P#.#P....#...#P#..P#....P#..P#.#.........#P...P#P#...#.#P..#..P.P#.#.....#P......#P#...#.#.#...#...#P..#.#.....#P#P#P..#...#..P..#......P#..P..#...P.....#.#P..PP..#.#P.P#.#..P#
#######.#P#.#.#.###.#.###.#########.###.#.###.#######.#.#.#####.###.###.###.###.#.#.#######.#.#####.#######.###.#.#.###.#.###.#.#.#.#####.###.#.#########.#.#######.#####.#######.###.#####.#.#.###.###.#
#...#P.P#.#...#.#P#P#...#..P..#P..#.....#.#...#.....#...#.#.....#..P#.#...#...#...#.......#...#P#...#.....#P#..P#...#..P#.....#P#.#P....#.....#P..#P...P#.#..P#..P#..P#P....#...#.....#P..#...#...#.#...#
#.#.#.###.###.#.#.#.#.#######.#.#.###.###P#.#.#.###.#####.#######.###.###.###.#.#######.#.#####.#.#.#.###.#P#.#######.###.#####.#.#####.#########.#.#.###.#####.#.###.#####.#.#.#####.#.#.#######.#.#.#.#
#.#P#..P#...#.#.#.#P#P..P..P#P#.#...#P.P#.#P#P#P#P#...#.....PP..#.#P....#..P#P#.#....P#.#P......#.#P#...#.#P#..P......#.#P..#.#.#...#...#.....#...#.#.#...#...#.#.#....P..#.#P#P#.....#.#...P...#...#.#P#
#.#.#######.#.#P#.#.#######.#.#.###.#####.#.#P#.#.###.#.#######.#.#.###.###.#.#.#.###.#P###.###.#P###.###.#.#######.#.#.###.#.#.###.#.#####.#.#.###.#.#.###.#.#.#.#######.#.#.###.#####P#######.###.#.#.#
#.#.........#.#.#.......#P.P#...#...#.....#.#P#.....#.#.#...#P#P..#...#..P#...#.#.#P..#.#P#.#.#P#.#...#P..#P..PP..#P#P#..P#P#.#.....#P......#.#...#.#...#P..#...#.#...#.....#P........#.#PP...#P..#.#.#.#
#.###########.#.#######.#.#######.###.#####.###.#####.#.#.#.#.#########.#######.#P#.###.#.#P#.#.#P#.###.#########.###.#.###.#.###############P###.#.#######.#####.#.#.#############.###.#####.###.#.#.#.#
#P..#..P......#...#.....#.......#..P#.#..P#.....#.....#...#P..#P.....P#P........#P#.#...#P#P#...#.#P..#P.P......#..P.P#..P..#..PP.....#.....#P#.#.#..P.P....#...#.#.#.#..P.PP...#.#.#..P#...#.#...#.#.#.#
###.#############.#.#########.#####.#.#.#####.###.###.#######.#.#####.###.#######.#.#.###.#.###.#.###.#####.###.#######.#####.#######.###.###.#.#.###########.#.#.#.#P#.#######.#.#P#.###.#.#.#.###.#P#.#
#P..#..P...P......#P#P...P.P#.#...#.....#..P#P..#.#P#......P#.#P....#..P#P.....P#P#.#.#..P#..P#.#P.......P#.#.#P#...P..P#.#......P#.#..P#..P..#.#...#P#P......#P#...#P..#P#.....#.#P#.....#P#.#.#...#P#P#
#.###.#############.#######.#.#.#.#######.#.#####.#.#.#####.#.#####.###.#######.#.#.#.#.#####.#.###########.#.#.#.#######.#.#####.#.###.#.#####.###.#.#.###.###.#########.#.#####.#.#######.#.#.#####.#.#
#P.P#.#P...P....#...#..P....#P..#..P#P#...#.......#P..#...#.#P....#...#.....#P..#.#P#.#P.P#...#...#P.......P#...#P.P.P..#...#.....#.#P..#..P.P#..P#.#...#.#P#P..#....P.P#..P#....P#...PP..#.#....P#...#P#
###.#.###.#####.#.###.###.#######.#.#.#.###############.#.#.#####.###.#####.#####.#.#.###.#.#####.#.###################.###.#.#####.#.#######.#.#.#P#.###.#.#####.#.###.#.###.#.#########.#.#####.#.###.#
#...#...#P...P#P#...#..P#.#...#P..#P..#...#...#....P.P..#.#P#P....#...#...#P...P.P#P#....P#P#P.P#.#..P.P.PPP..........#...#.#..P#.....#P....#...#.#.#.#...#....P.P#...#.#.#...#.......#...#...#.#P.P#P..#
#.#####.#######.###.#.#.###.#.#.#########.#.#.#.#######.#.#.#.#####.###.#.#########.#######.###.#.###################P###.###.#.#.#######.#.#.#####.#.###.###########.###.#####.###.###.#####.#.#####.###
#.#...#.#...#P....#.#.#.#...#.#...#....P#...#...#P#...#.#.#.#...#...#P#.#.....#..P#....P#...#...#...#...#.......#P..#...#..P#P#.#...#P..#.#P#.#..P..#...#.#....P.PPP#P#P..#..P#.#.#...#..P#...#........P#
#.#.#.#.#.#.#.#####.###.#.###P#.#.#.#.#.#########.#.#.###.#####.###.#.#.###.#.#.#######.#.###.#####.#.#.#.#####.#.#.#.#.###.###.###.#.#.#.#P#P#.#######.#.#.#.#######.#.###.#.#.#.###.#.###.#.###########
#P.P#.#.#.#...#..P#P..#.#...#.#P#P..#.#...........#.#.#...#...#..P..#....P#P#.#....P#...#...#..P.P..#.#.#P#P....#.#...#...#..P#..P#P#.#P..#.#.#...#..P#.#..P#P.P...P#..P#...#P#....P#P..#P..#.#.........#
#####.#.#.#####.#.###.#.###.#.#######.###.#######.#.#.#.#P#.#.#############.#.#.###.#.#####.#.#######.###.#.#####.###.#######.###.#.#.#######.###.#.###.#.#########.#####.###.#####.#####.#####.#######.#
#P....#.#...#P..#.......#..P#.#..P..#.#PP.#.....#.#.#...#P#.#....P#........P#P#...#.#.......#.#P.P#......P#..P#...#P.P#....P#....P#.#...#P..#..P#.#..P..#P#...#..P.....P#P#...#P..P.#.....#.....#P....#.#
#.#.###.#.#.#.#########.#.###.#.###.#.#####.###.#.#.#######.###.###.#.#######.#####.#########.#.###.#########.#.#.#####.#.#.#######P#.#.#.#.#.###.#.#####.#.#.#.#######.#.#.#####.###.###.#.#######.#.#.#
#.#P#P..#.#...#....P#...#.#P..#P#.#.#.#....P#P#.#P#...#.....#.#.#...#.#....P#.#...#...PP....#.#P#.......#...#.#P#P#.....#.#....P..#.#.#P..#...#..P#...#P....#.#.#P..P.....#..P..#..P#..P#P#P...P#...#.#P#
#.###.###.#####.###.#.###.###.#P#.#.#.#.#####.#.#.###.#.#####.#.#.###.###.#.#.#.#.#.#######.#.#.#.#######.#.#.#.###.#####.#######.#.#.#######.#.#####.#########.###############.###.###.#######.#.###.#.#
#...#..P#P.P#...#...#P..#...#...#.....#...#P....#..P#.#..P#...#..P#P#...#P#.....#..P#P......#P#....P#....P#...#..P#.#P.P#P#.....#P#.#P#.....#P#P.P#P..#..P...P#..P..PPP.P...#P#.#P..#P#P......#P#.#P.P#.#
#.#.###.#####.###.#####.###.#####.#######.#####.#####.###.###.#####.###.#############.#######.#####.#.###########.#.#.###.#.###.#P#.###.###.#####.#.###.#####.#.###########.#P#.###.#.#####.###.#.#####.#
#.#...#.......#...#.#...#P#.P.#.....#.....#P..#.....#...#.#....P.P#P..#.#.....#.#..P#.#...#P..#...#.#P....#....P#P..#..P#...#P..#P#.....#.#P..P...#.#P......#.#..P..#....P#.#.#P..#......P#.......#.....#
#P###.#########.###.#.###.###.###.###.###.#.#.#####.#.#.#.#.#####.###.#.#.###.#.#.#.#.#.#.#.###.#.#.#####.#.###.#######.#####.###########.#########.#.#####.#.#####.#.#.###.#.###.#################.#####
#P#.#......P..#P..#...#.....#...#.#P..#P..#.#.#.....#.#.#P.P#...#...#.#..P#P#.#...#.....#P#.#...#.#.#...#.....#...#.......#P#.#..P.P......#....P#...#P#..P#.#...#....P#.#...#...#P.P.P#P..PP.P....#..P.P#
#.#.#########.###.#.###.###.###.#.#.###.###.#.#.#####.#P#######.###.#.#####.#.#######.#####.#.###.#.###.#######.#.#.#####.#.#.#.#######.###.#.###.###.#.#.#.###.#######.#.#####.#####.#.#########.#####.#
#.....#.....#.....#.#P..#...#.P.#.#.#P.P#..P#.#P...P..#.#.........#.......#.#.#P....#.#...#...#P..#......P#P....#..P#P#P..#.#.#.#..P#...#...#.#P..#P....#.#.#P#.#P.P..#.#.#P....#P.P#.#.#P#......P#...#.#
#####.###.#.#######.#####.###.###.#.#####.###.#########.#.###.###########.#.#.#.###.###.#.#####.###.#######.#########.#.###.#.#.#.###.#.#.###.#.#######.###.#.#.#.###.###.#.###.#.#.#.#.#P#.#######.#.#.#
#P..#P#...#.......#P......#...#P..#.....#.#.#.#...PP#...#.#.#....P.....P#.#P#P..#P#.#..P#.....#.#P..#.......#....P.P..#..P#P#.#.#P..#.#.#P#.#...#...#P.P#P..#...#P..#.#...#..P#.#P#.#..P#.#.......#.#P.P#
#.#.#.#.#########.#########.###.#######.#.#P#.#.###.#####.#.#########.###.#.#####.#.#.#####.###.#####.#######.#######.###P#.#.#.###.#.###.#.#####.#.#####.###.#####.#.#.###.#.###.#.#####.#######.#.###.#
#P#....P#...PP......PP..P...#P......P.#.....#....P#P............P...#..........P..#....P..#..P........#........PP.P.#.......#..P.P..#P............#..P....#P.......P#P.P#...#.....#...P.....PPPP....#P...
#########################################################################################################################################################################################################`, true)).toBe(1783)
	})
})

describe('Part 3', () => {
	test('Example', () => {
		expect(solveQuest3(`##########
#.#......#
#.P.####P#
#.#...P#.#
##########`)).toBe(12)
	})

	test('Notes', () => {
		expect(solveQuest3(`###########################################################################################################################################################################################################################################################
#..P#...............#.....#.................#.....#...#.....#...#.........#.......#...........#.......#..P....................#...#P..#.....#...#...#.......#.........#.......#.........#.............#...#...............#.....#...#...#.........#.......#
#.#.#.#.###########.#.#####.#.#############.#.###.#.#.#.###.#.#.#.#######.#.###.###.#####.###.#####.#.#############.#########.#.#.###.#.#.#.#.#.#.#.###.#.#.#.#.###.###.#####.#.###.#####.#####.#####.#.###.#####.#########.#.#.#.#.#.#.###.#####.#.###.###
#.#...#.#...#P..#...#.....#.#.....#.......#.#.#...P.#...#...#.#...#.....#...#.#.....#...#.#.#...P...#...#...#...P...#.......#...#.....#.#.#...#...#...#.#.#.#.#.#...#...#...#.#.#.#.....#...#.#.#...#.#.....#...#...#.......#.#...#...#...#...#.#.....#...#
#.#####.#.#.#.###.###.###.#.#####.#######.#.#.###############.#####.###.#####.#######.#.#.#.###########.#.#.#.#######.#####.#########.#.#.###########.#.#.#.###.#.###.###.#.#.#.#.#####.###.#.#.#.###.#.#####.#P###.#.#######.###########.###.#.#####.###.#
#.......#.#...#...#.#...#...#...#.......#...#...............#.#.....#P#.....#.........#.#.#.....#.....#...#.#.............#.......#...#.#...........#.#.#.#.....#...#.#...#.#.........#.#...#.#.#.....#P#.....#...#.........#.#.....#.#...#.....#...#...#.#
#########.#####.###.###.#####.#####.###.#.###.#############.#.###.###.#####.#####.#######.#.###.#####.#####.#.###########.#######.###.#.###########.#.#.#.#.#########.#.###.###########.#.###.#.#####.###.#######.#.#########.#.#.#.#.#.###.#####.#.#####.#
#..P..........#.#.....#.......#P..#.#...#.#.#.....#....P..#.#...#.#...#.#...#.....#......P#...#.#.....#.....#...#...#.......#...#...#.#.#..P#.......#.#.#P#.#.........#.#...#.........#.#P#...#.....#...#.#.....#.#...#.......#.#.#...#...#...#...#...#...#
#############.#.#.#.#######.###.#.###.###.#.#####.#.#####.#.###.#.#.#.#.#.###.#.###.#########.#.#.###.#.#######.#.#.#######.###.###.###.#.###.#######.###.#.#.#########.#.###.#######.#.#.#.#######.###.#.#.#.###.#.###.#######.#.#######.#####.#####.#.###
#.....#.......#.#.#.....#...#...#.....#...#.#.....#.#...#.#...#...#.#...#.....#.#...#.........#.#.#...#.......#P#.#.......#.....#...#....P#...#.....#.P.#.#.#.#.........#...#...#.......#.#.......#.#...#.#.#P#...#.#...#...#...#.....#...#.....#...#.#...#
#.###.#.#####.#.#######.#.###.#########.###.#.#####.#.###.#.#######.#####.#######.###.#########.#.#.#########.###.#######.#####.#.###.#####.#####.#.###.#.###.#.###############.#.#######.###.###.#.#.###.#.#.#.###.#.###.#.#.#######.#.###.#####.###.#.#.#
#.#.#...#.....#.......#...#...#...#.#...#.....#..P#.#.......#.......#.....#.......#.........#...#P#...#.....#...#.#.....#.#...#.#..P..#...#.....#.#.....#...#.#...#...........#.#...#...#.....#...#.#.....#.#...#...#.#P..#.#.#.....#...#.#...#.......#.#.#
#.#.#####.###########.#####.###.#.#.#.#####.###.#.#.#########.###.###.#####.#####.#####.###.#.###.###.#.#.#####.#.###.#.#.#.###.#######.#.#####.#.#########.#.#.#.#.#######.#.#.###.#.#.#######.###.#######.#####.###.#####.#.#.#.#.#####.#.#.#.#######.#.#
#.#.....#.....#.....#.......#...#...#.#...#.....#.#.....P...#.#.#.....#...#...#...#...#..P#.#...#P#...#.#.....#.#.#...#P#.#...#.#.......#.......#.#.......#.#.#.#.#.......#.#.#...#.#.#...#...#.#.#.....#.#.#...#...#.....#...#.#.#.#.......#.#.#...#...#.#
#.#####.#####.#.###.#########.#####.#.#.#.#######.#########.#.#.#######.#.###.#.###.#.#####.###.#.#.#######.#.#.#.#.#####.#.#.#.#.###############.###.###.#.#.###.#.#######.#####.###.###.#.#.#.#.#####.#.#.#.#.#########.#.#####.#.#########.#.#.###.###.#
#.....#...#...#...#...#.......#.....#.#.#.#.........#.......#.#.....#...#...#.#...#.#.#.....#.#...#.....#...#.#...#.......#.#...#.#.....#.........#...#.....#...#.#.#.......#...#.......#...#.#...#...#.#.....#.....#P....#.....#.#...#...#...#P#.#...#.#.#
#.###.###.#.#####.###.#.#####.#.#####.#.#.#########.#.#.#####.###.#.#.#####.#.#.###.#.#.#####.#########.#.#########.###########.#.#####.#.#########.#######.###.#.#.#.#######.#.#########.###.###.#.#.#.###########.#.#########.#.###.#.#.#.###.#.#.###.#.#
#.#...#...#.#.....#.#.#...#.#.#.#...#.#.#.......#...#.#.#.....#...#.#.#..P....#.#...#.#.#...#...#..P..#.#.........#.#...#.....#.#.#.....#.#....P....#....P#.#...#...#.....#...#.........#...#...#...#.#P....#.....#...#.#.......#...#...#.#.#...#...#...#.#
#.#.###.###.#.#####.#.###.#.#.###.#.#.#.#######.#####.###.#####.###.#.#########.#.###.#.#.#.###.#.###.#.#.#######.#.#.#.#.###.#.#.#.#####.#.#.#######.###.###.###########.#.###########.#####.#####.#######.#####.#####.#.#########.#####.#.#.#####.###.#.#
#.#...#.......#.....#...#...#.....#.#...#...#...#...#...#.#.#...#.#.#.#.....#...#.#...#...#...#.#.#.#...#.......#.#...#...#...#.#.#...#...#.#...#...#...#...#.#.....#.....#...#.......#.....#.......#.....#.#...#.....#...#.......#.....#...#.....#.....#.#
#####.#.#########.#####.###.#######.#######.#.###.#.###.#.#.#.#.#.#.#.#.###.#####.#.###.#####.#.#.#.#######.#####.#########.###.#.###.#.#######.#.#.###.###.#.#.###.#.#######.#.###########.#########.###.#.#.#.#.###.#.###.#####.#####.#########.#####.#.#
#.....#.#...#...#.......#..P#...#...........#.....#...#...#...#.#.#.#.....#.#...#.#.#.......#.#.#.#.......#.#.........#...#...#P#...#.#.#.....#.#.#...#.#...#...#...#...#.....#.......#.....#.....#...#...#...#.#...#P#.#P..#...#.......#P....#.#.....#.#.#
#.#####.#.#.#.#.#.#######.###.#.#.#########.#########.###.#####.#.#.#######.#.#.#.#.#########.#.#.###.###.###.#######.#.#.###.#####P#.#.#.#.#.#.#.#.###.#.#######.###.#.#.#######.###.#.#####.###.#.###.#######.#####.#.###.#.#.###########.#.#.#####.###.#
#...#.#...#.#.#.#P#...........#.#.......#.....#.....#...#...#...#.#...#...#...#P..#.#.....#...#.....#.#P#.#...#.....#.#.#.....#.....#...#.#.#...#.#.#...#.....#.#...#.#.#.#.....#...#.........#...#.#.#.#.......#.....#.....#.#.............#......P#.#...#
###.#.###.###.#.###.#############.#####.#####.#.#.#.###.###.#.###.#.###.#.#.#######.#.###.#.#######.#.#.#.#.###.###.#.#.#######.#####.#####.#####.#.#.#####.#.#.###.###.#.#.###.###########P#####.#.#.#.#.#######.###.#######.#.#############.#######.#.###
#...#.....#P..#.....#...........#..P#...#...#P#.#.#..P#.#.#.#P#.....#...#.#...#.....#.#P#.#.#...#...#.#...#...#...#...#.#.......#...#.#.....#...#.#.#.....#.#.....#...#.#...#.#.#.......#...#...#...#...#.#.......#...#.......#.#.....#...#...#.....#.#...#
#.###.#####.#########.#########.#.###.#.#.#.###.#.###.#.#.#.#.#.#####.###.###.#.#####.#.#.#.#.#.#.###.###.###.#########.#.#######.###.#.###.#.#.#.#.#####.#.#########.#.#####.#.#.#####.#.###.#.#####.###.#####.###.###.#########.###.#.#.#.###.###.#.#.#.#
#.#...#.#...........#.......#.#.#.#...#.#.#...#.#.#...#.#.....#.....#.#.#...#.#.......#P#.#...#.#...#...#...#.....#...#.#.....#.#...#...#...#.#...#.......#.....#.....#.......#...#.....#.#...#...#.......#.....#P......#...#.....#.#.#.#.#...#.#...#.#.#.#
#.###.#.#.#################.#.#.#.#.#####.###.#.#.#.###.#############.#.###.#.#########.#.#.###.###.###.###.#####.#.#.#.#####.#.#.#.#.#######.#################.#.#########.#.#####.#######.#####.#########.#.#########.#.#.#.#####.#.###.###.#.#.###.###.#
#...#...#.#....P............#.#.#.#.....#.#.#...#.#...#...........#...#...#.#...........#.#...#...#...#.#.........#.#.#...#...#...#...#.......#..............P#.#...#.....#.#...#.#...#.....#..P#...#.......#.#.....#P#.#.#...#...#.#...#.#...#.#.#...#...#
#.#.###.#.#.#################.#.#####.#.#.#.#####.###############.#.###.#.#.#####.#######.#.#####.###.#.#.#########.#.###.#.###.#######.#######.###.#####.#####.###.#.###.#.###.#.###.#.#####.#####.###.#######.###.#.#.#.#####.#.#.###.#.#P###.#.#.###.###
#.#.#...#.#.........#.#.......#.....#.#.#.#.#...#.........#...#...#.#...#...#P....#...#...#.#...#...#...#.#.#.....#.#.....#...#.....#...#...#...#...#.#...#.....#...#.#.#.#.#.......#.#.#.........#...#.#...#...#.#.#...#...#...#...#...#.#.#...#...#.....#
#.#.#####.#########.#.#.#####.#####.#.#.#.#.#.#.#######.#.###.#.###.#.#############.#.#.#####.#.###.#####.#.#.###.#.#######.#.###.###.###.#.#.###.###.#.###.#####.###.#.#.#.#######.#.#.#.#######.###.#.#.#.#.###.#.#######.#.#####.#.###.#.#.#######.###.#
#.#.#.....#.......#.#...#...#.....#.#.#.#...#.#.....P...#.#...#.....#.#.............#...#.....#.....#...#...#.#.#.#.#.#...#.#.#...#...#...#.#...#...#.....#...#...#...#.#...#.....#.#...#P....#.#.#...#...#.#.....#...........#.....#.#.....#.#.....#.#...#
#.#.#.#####.###.###.###.#.#.###.###.#.#.###.#.###########.#.#########.#####.#############.#.#.#######.#####.#.#.#.#.#.#.#.#.#.###.#.###.###.#######.#####.###.#.###.#.#.###.#.###.#.#########.#.#.#.#######.#####.#########.#########.#.#####.#.###.###.#.#
#.#...#...#...#..P#...#.#.#.#.#...#.#.#.....#.#.....#.....#.....#...#.....#...#...........#.#.#.....#.......#.#.#...#...#.#.#...#.#.#.....#.......#...#...#.#.#...#P#.#...#.#.#...#.#.......#...#.#.#.....#.#...#.....#...#.#.........#.#...#...#.#...#.#.#
#.#####.#####.###.###.#.#.#.#.###.#.#.#######.#.###.#.#######.#.###.#####.###.#.###########.###.###.#######.#.#.#########.#.###.###.#####.#######.###.#.###.#.###.###.#.###.#.#.###.###.###.###.#.#.#.###.#.#.#.#####.#.#.###.#########.#.#######.###.#.###
#.#...........#.#.#...#..P#...#...#.#.#.....#.....#.#..P#.....#.......#.#.....#.........#...#.....#.......#.#.......#.....#...#.....#.....#...#.#P....#.#...#...#.#...#.#...#.#.#.#...#...#.#...#P#.....#.#...#...#...#.#.....#.....#...#....P..#...#.#...#
#.#####.#######.#.#.#########.#.###.###.###.#####.#.###.#.#####.#####.#.#########.#####.#.###.###########.#########.#.###.###.#######.#####.#.#.#######.#.#.###.#.#.###.#.###.#.#.###.###.#.#.###.#######.#######.#.###.#####.#.###.###.#.###.#.#.#.#.###.#
#.#...#...#....P#.#.........#.#.........#.#...#...#...#.#.#.....#...#.......#.....#...#.#.#...#...........#.........#.#...#...#...#P#...#...#.#P......#.#.#...#...#.#...#.#...#.#....P..#.#...#.....#.....#.......#.#P#.....#.#...#...#.#...#.#.#P#.#.#...#
#.#.#.###.###.###.#########.#.###########.###.#######.#.#.#.#####.#.#######.#######.#.###.#.###.#########.#.#########.#####.###.#.#.#.#.#.###.#####.#.#.#.###.#####.#.###.#.###.#.#####.#######.#####.#####.#######.#.#####.#####.###.#.#####.#.###.#.#.#.#
#...#...#....P#.......#.#...#...#.....#...#...#P......#.#.#...#...#.#...#.........#P#.....#.#.#.....#...#.#...#.............#...#.#...#.#.#.#.#.....#.#.#...#.......#.#...#.#...#.#...#.......#.....#.#.....#...#...#.....#.....#.#.#.#.......#.....#...#.#
#######.#.#####.#####.#.#.#######.###.###.#.###.#######.#.#####.###.#.#.#########.#.#####.#.#.#####.#.#.#####.#.#####.#########.#.#####.#.#.#.#.#######.###.#####P###.#.###.#.#####.#.#######.#####.#.#.###.#.#.#.#######.###.#.#.#.#.#####.#######.#####.#
#.#.....#.#.....#...#.#.#...#.....#.#...#.......#.....#.#...#.....#...#...#.....#.#.....#.#.#.....#...#...#...#P#...#.....#.....#.#.....#.#.#.#...#.....#...#...#.#.#.....#.#.......#...#...#.....#.#.#...#...#...#.....#...#.#P#...#...#.#.#.....#.#....P#
#.#.#####.#.#######.#.#.###.#.#####.###.#########.###.#.###.#.###########.#.#.###.#.###.###.###.#######.#.#.#####.#.#####.###.###.#.#.###.#.#.#.#.#.#######.#.#.#.#.#.#####.###########.#.#.#####.#.#.#####.#####.###.#.#.#.#.#####.###.#.#.#.###.###.#####
#.#.....#.#.#.......#...#.#.#.#P......#.P.#.#.......#.......#...#.........#.#P#...#...#...#.....#.....#.#.#.#.....#.....#.....#.....#.#...#...#.#...#.....#...#.#.#.#...#...#...#.....#...#.....#.#.#.....#.#...#.....#...#.#.........#.#...#...#.....#...#
#.#####.###.#.###.#.###.#.#.#.#####.#.###.#.#.#############.###.#.#########.#.#.#######.#.#.#####.###.###.#.#.#.#######.###.#########.#.###.#####.###.#.#.#####.#.#.###.#.###.###.#.#.#########.#.#.#####.###.#.#######################.#.#####.#########.#
#.#.....#...#...#.#...#.#.#.#.#.....#.#...#...#.........#...#...#.#.......#.#.#.......#.#...#...#...#.....#.#.#...#...#...#.#...#.....#.#...#...#...#.#.#.#...#.#.#.....#.#.......#.#...#...#...#.....#.#.....#.................#.....#.#.#.....#.........#
#.#.#####.#####.#.###.#.#.#.#.#.#####.#.#######.#######.#####.###.#######.#.#.#######.#######.#.###.#####.#P#####.#.#####.###.#.#.#####.#.###.#.###.###.#.#.###P#.#.#####.#.#######.###.#.#.#.#######.#.#######################.#.###.#.#.#.#####.#######.#
#.#...#...#.....#..P#.#...#.#...#.#...#.........#.#.....#.....#.#.......#...#.#.....#...#.....#P..#.#.....#......P#.#...#.....#.#.#.....#...#.#...#.....#.#...#.#.#.#.....#.#...#...#P....#.#.......#.#..................P#...#...#...#.#.#.#.......#...#.#
#.###.###.#####.###.#####.#.#####.#.#############.#.###.#.#####.#######.#####.#.###.###.#.#######.#.#.#############.#.#.#######.###.#######.#.###.#######.#.#.#.#.###.#####.#.###.#######.#########P#.###.#########.#####.#.#.#####.###.###P#####.#.#.#.###
#...#...#.....#...#P....#.#.......#...#...........#.#...#P..#.....#.....#...#...#.#...#...#...#...#.#...#...#.....#...#.....P.#.#...#.....#...#.#...#...#.#.#...#.#...#..P#...#...#..P#...#.......#.#...#.....#.....#.....#.#.....#.#...#..P#...#.#...#...#
#.#.###.#.###.###.###.#.#.#####.#####.###.#####.###.#.#####.#.#####.###.#.#.###.#.###.#####.#.#.###.###.#.###.#.#.#####.#######.#.###.#.#.#####.###P#.###.#######.#.#####.###.#.###.#.###.#.###.###.###.#######.#####.#####.#.###.#.#.#.#.###.#.###.#####.#
#.#.....#P#..P#...#...#.#.....#.....#...#.#.....#...#.#...#.#...#...#..P#.#...#.....#.......#P#.#...#...#.....#.#.#...#.......#...#...#.#...#.......#.............#.....#.....#.#...#...#.#...#.....#...........#.......#P..#.#.#.#.#.#.#.#...#...#..P..#.#
#.#########.#######.#########.#####.###.#.###.###.#####.#.#.###.#.###.###.###.#######.#.#####.#.###.#.###.#####.#.#.#.#.#####.#########.#####.#######.#################.#######.#.#####.#.###.#########################.#####.#.#.#.#.#.#.#.#.###.#######.#
#.#...#.....#.......#.......#.#.P.#.....#...#.#P#.#....P#.#...#.#.#...#.#...#.......#.#.#...#.#.....#...#.#.....#.#.#.#.....#...........#.....#.....#...#...............#.....#...#...#.#.#.#.........................#.#.....#...#.#.#...#.#...#..P..#...#
#.#.#.#.#####.#####.#.###.#.#.###.#########.#.#.#.#.#####.###.#.#.#.###.###.#######.#.###.#.#.#########.###.#####.#.#.#.#########.#####.#.#####.#.#.###.#.###############.###.#####.#.#.#.#.#########################.#.#.###.#####.#.#####.###.#####.#.#.#
#...#...#.......#...#.#P#.#.#.......#.......#...#.......#.#.....#.#.#.P...#...#.#...#.....#.#...#....P#...#.....#...#.#.#....P....#.#...#...#...#.#...#.#.#.......#...#...#.........#...#...#.......................#.#...#.#.#.....#...#.#.#.#.....#...#.#
#########.#####.#.###.#.#.#########.#####.#.#############.#.#####.#.#.#######.#.#.###.#####.###.#.#######.#.###.#####.###.#.#######.#.#####.#.###.###.#.#.###.#####.#.#.#.#######.###########.#####################.#.#####.#.#.#######.#.#.#.#####.#####.#
#.#...#.....#...#.#...#.#.#.......#.......#.#...........#...#...#.#...#.........#.#...#...#.#.....#.....#.#.#.#.#...#.....#.#.....#...#..P..#...#.#...#.#...#...#..P#...#...#.....#...#...P...#.....#.........#.....#.#.......#.#.#...#.#.....#...#...#.#.#
#.#.#.#.#####.###.#.###.#.#.#####.#########.#.#########.#####.#.#.#.###.#######.#.###.###.#.#######.###.#.#.#.#.#.#.#######.#.###.#####.#########.###.#####.#.#.#.#########.#.#####.#.#.#######.#####.#######.#.###.#.###.#####.#.#.#.#.###.###.#.###.#.#.#
#..P#...#.....#...#...#.#.#...#...#.......#.#.#.P.#...#.#...#.#...#.#...#.....#.#...#...#.#.........#.#...#.#.#.#.#...#...#.#.#.#.....#.........#...#...#...#.#.#...#.....#.#.#.....#...........#.....#P#..P..#.#...#...#...#...#...#.#...#P#...#.....#.#.#
#.#######.#####.#####.#.#.###.#.###.#####.#.#.#.#.###.#.#.#.#.#####.#.###.###.#####.###.#.#####.#####.#####.#.#.#.#.###P#.#.#.#.#####.#########.#.#.###.#.#####.###.#.#####.#.#.#################.#####.#.#####.#.#####.#####.###.###.###.###.#########.#.#
#.#.....#.#...#...#...#.#.#...#.........#...#...#.#...#.#.#...#...#.#.#.#.#.#...#...#.....#...#...#...........#.#.#.....#.#P#...#...#.........#.#.#...#.#.....#...#..P#.....#.#.....#.#.....#.....#.....#.#.....#.....#.......#.#.#.....#.....#.......#.#.#
#P#.###.#.#.#.###.#.###.#.#.#####################.#.###.#.#.###.#.###.#.#.#.###.#.#########.#.###.#############.#.#######.#.###.###.#####.#####.#.###.#.#####.#.#.###.#.###########.#.#.###.#.#########.#.#.#.#######.#########.#.#.###.###########.#.#.#.#
#.#.#.#.#.#.#...#.#.#...#.#...#...#.....#.....#...#...#.#.#P#...#.......#P#.#.....#.........#...#.......#.......#.#.....#...#...#.......#.......#.#.#.#.......#.#...#.#.....#.......#.#.#...#.#.........#.#.#.#.................#.#.#.#.#P......#...#...#.#
#.#.#.#.#.#.###.###.#.#.#.###.###.#.###.#.###P#.#####.#.#.#.#.###########.#.#.#####.###########.#######.#.#######.#.###.#####.###.###############.#.#.#############.#.#####.#.#######.#.#.###.#####.#.###.#.#.#####.#############.#.#.#.###.###.#.###.###.#
#.#...#.#P..#.#.....#.#.#..P#.#...#.#...#...#.#.#.....#...#.#.#...#...#...#...#.....#...#.....#.#..P..#.#...P...#.#.#...#...#.#.....#.............#.#...#...........#...#.#.#.#P......#.#...#...#...#.#...#.#.....#...#...........#.#.......#.#...#.#.#...#
#.#####.#####.#######.#.###.#.#.###.###.###.#.#.#.#.#####.###.#.#.#.#.#.###.###.#####.#.#.#.###.#.#####.#######.###.#.###.#.#.#.###.#.#############.###.#.#########.###.#.#.#.###.#.###.###.###.#.###.#.###.#####.#####.###########.#########.#####.#.#.###
#.#...........#.....#.#...#...#...#...#.....#.#.#.#P......#...#.#...#.#...#...#.#...#.#.#.#.#...#.....#...#...#.....#.#...#...#.#.#...#.......#.....#...#.......#.#...#...#.#.....#.#...#P......#...#.#.#.#.....#.........#...#...#...#.....#.........#.#.#
#.#.#########.#####.#.###.#######.###.#######.#.#.#####.###.###.#####.###.#####.#.#.#.#.#.#.#.###.###.###.#.#.#######.#.#######.#.#######.###.#.###.#.###.#####.#.###.###.#.#######.#.###########.#.###.#.#.#####P#######.#.###.#.###.#.#####.#########.#.#
#.#...#...#...#...#.....#...........#.#...#...#.#.#...#.#.#.#P..#...#...#.......#.#..P#...#.#.#.....#...#.#.#.#.......#...#...#.#.....#...#.#.#...#P#...#...#...#.#...#...#.......#.#.....#.....#.#.....#...#...#.#.....#.#.....#...#.#...........#.....#.#
#.###.#.#.#.###.#.###########.#####.#.###.#.###.#.#.#.#.#.#.#.#.#.#.#############.#######.###.#########.#.#.#.#.#####.###.###.#.###.#.#.###.#.###.#####.#.###.###.#.###.#####.###.#.#####.###.#.#.#######.###.#.###.###.#.#########.#.###.#########.#####.#
#...#.#.#.#.#...#.......#...#...#...#...#.#...#.#.#.#.#...#.#P#...#.........#P....#.#...#.#...#.........#...#...#.....#...#...#.#...#.#.#........P#...#.#.#...#...#.#...#...#...#.#.#..P..#...#.#..P#.......#.#.....#...#...........#...#...#...#...#.....#
###.#.#.#.#.#.#.#######.#.#.###.#######.#.###.#.###.#.#####.#####.#######.#.#####.#.#.#.#.#.###.###########.###########.###.###.#.###.#.#.#########.#.#.#.#.###.###.#.###.#####.#.#.#.#####.#.#####.#########.#######.#############.###.###.#.#.#.#####.#.#
#P#...#.#.#.#.#...#...#...#.#...#.......#...#.#...#.#.#.....#...#...#.....#P......#...#...#...#.....#.....#.#.........#.#.#...#...#.#...#...#...#...#...#.#...#.....#.#...#.....#.#.#...#...#.#...#..P..#...#.#.........#.............#.#...#.#...#...#.#.#
#.#####.#.#.#####.#.#######.#.#.#.#######.#.#.###.#.#.#.#####.#.#####.#.###########.#####.###.#.###.#.#.###.#.#######.#.#.#.#.#####.###.#####.#.#.#########.#.#######.#.#.#.#####.#.###.#.#.###.#.#####.#.#.#.#.#######.#.#######.#####.#.###.#####.#.#.#.#
#...#...#...#.....#.#.......#.#.#..P....#P#P......#.#.#.#.....#.......#.#.....#...#.#...#P#...#...#...#.#...#.#.....#...#.#.#.......#...#.....#...#.......#.#.#...#...#.#.#.#...#.#...#.#.#.#...#.....#...#.#.#.#.P.#.#.#..P#...#P#.....#...#...#...#.#.#.#
#.#.#.#######.#####.#.#######.#########.###########.#.#.###.#.###########.###.#.#.###.#.###.#####.#####.#.###.###.#.#####.#.###.#####.###.#.#######.#####.#.#.#.#.#.###.#.#.#.#.#####.#.#.#.#.#######.#####.#.###.#.#.#.#####.#.###.#####.#####.###.#.#.#.#
#P#.#.#.....#.#.#...#...#.......#.....#.....#.....#.#.#...#.#.#.....#.....#P#.#.#.....#...#.#...#...#.#.#...#.....#.#...#...#.#.......#.#.#.#...#...#.....#.#.#.#.#.....#.#.#P#.#.....#.#.#.#.#...#.......#.#.#...#.#.........#.....#.#...#.....#...#..P#.#
#.###.#.#.#.#.#.#.#.###.#.#####.#.#.#######.#.###.#.#.###.#.###.###.#.#####P#.#.#########.#.###.###.#.#.###.#######.#.#.#.###.#########.#.###.#.#.###.#####.#.#.#.#######.#.#.#.#.#####.#.#.#.###.#.#####.#.#.#.###.#####.###########.#.###.#####.#######.#
#.#...#.#.#...#...#...#.#.#...#...#...#.....#...#...#...#.#.......#.......#.#...#.........#...#.......#...#.#.....#.#.#...#.............#.....#.#...#.#.....#...#...#.....#...#...#.....#.#.#.....#.....#.#...#.#P#...#...#.......#...#...#P....#.#P......#
#.#.#####.#####.###.#.#.###.#.#######.#.#####.#######.#.#.#.#############.#.#####.#####.#####.#########.#.#.#.#####.###.#####.#########.#######.###.#.###.#########.#.#############.#####.#.#####.#####.#.###.#.#.###.#####.#####.#.#.###.#####.#.###.#####
#...#.....#.....#.#.#.#.....#.........#.#.....#.......#.#.#.#.......#...#...#.#...#.....#...#.........#.#...#.....#...#.......#.......#...#...#...#.#...#.#...#.....#.......#.......#.....#.........#...#.#...#...#...#.......#...#.#.....#...#.#...#...#.#
#.###.#####.#####.#.#.#######.#########.#.#####.#########.###.#####.#.#####.#.#.###.#####.#.#######.#.#.#########.###.#####.###.#####.###.###.#.###.###.#.#.#.#.###.#######.#.#.#####.#####.#########.#####.#####.#.###.#######.###.#######.#.#.###.###.#.#
#...#.#...#.......#.#.#.......#.........#.#...#.#.......#...#.#...#.#.........#...#.#...#.#.......#P#.#.#.....#.....#...#...#...#...#...#.....#.......#.#...#.#...#.....#...#.#.#...#.#...#P#...#...#...#...#.....#.....#.......#...#....P..#.#...#...#...#
###.#.#.#########.#.#.#.#######.#########.#.#.#.#.#####.###.#.#.#.#.###.#########.#.#.#.#.#######.###.#.###.#.#.#######.#.###.###.#.###.#####.#########.#######.#.###.###.###.###.#.#.#.#.###.#.#.#.###.#.###.###########.###.#####.#.###########.#.#.###.#
#...#.#.#.......#.#.#.#P....#.P.#.....#...#.#.#.#.#...#...#P#.#.#.#...#...#.......#.#.#.#...#...#...#.#...#.#.#...#.....#.#.#.#...#...#.#.......#.......#.....#.#.#.#.#...#.#.....#.#.#.#...#.#...#.#...#...#.....#.....#...#.#...#...#.....#...#.#.#.#...#
#.###.#.#.#####.#.#.#####.###.#.#.###.#.###.#.#.#.#.#.#.###.#.###.###.#####.#######.###.###.#.#####.#.###.#.#.###.#.#####.#.#.###.###.#.#########.#######.###.#.#.#.#.#.###.#######.#.#.###.#.#####.#.#####.#####.#####.###.###.#.#.###.###.#.#.#.#.#.#####
#.#...#...#.....#.#...#...#...#.#.#.#...#...#.#...#P#.#...#.#...#.......#...#.#.........#...#.........#.....#.....#.....#...#...#.#.#.#...#.......#.......#.#.#.#.#...#.#...#...#...#.#...#.#.#...#.#...#...#.....#.....#.#.....#.#.#...#.#...#...#.#.....#
#.#.#.#.###.#.###.###.#.###.#####.#.#####.#########.#####.#.#.#.#######.#.###.#.#########.#.###########################.###.###.#.#.#.###.#.#######.#######.#.###.#.###.###.#.#.#.###.###.#.#.###.#.###.#.###.#####.###.#.#######.###.###.#########.#####.#
#.#.#.#.#...#.#..P#.#.#.#.#.......#.............#.......#...#.#.......#.#.#...#.#...#.....#.#.....#.......#.....#.....#.#.#.#.#.#...#.#...#.........#.......#...#.#.#..P#...#.#...#.....#.#.#.....#...#...#.#..P..#.#...#.P.....#...#.#.........#.......#.#
#.###.###.#####.###.#.#.#.#########.#######.#.#.###.###.#####.#######.#.#.#.###.###.#.#####.#.###.#.#####.#.###.#.#.#.#.#.#.#.#.#####.#.###.#############.#.###.#.###.###.###.###########.#.#####.###.#.###.#####.#.#.#####.#######.#.#####.###.#.#######.#
#...#...#.#........P#.#...#...#...#...#...#.#.#...#...#.....#.......#.#.#.#.#...#...#...#...#...#...#...#.....#.#.#.#.#.#...#.#.#...#.#...#...#.........#.#...#.#.......#...#.............#.....#...#.#.........#.#.#.......#.......#...#...#...#.#...#...#
###.#.#.#.#.#########.###.#.#.#.#.#####.#.###.###.###.#.###.#######.#.#.#.#.#.###.#####.#######.#######.#######.#.#.###.#.###.#.#.#.#.###.###.#######.#.###.#.#.#######.###.#################.#.###.#.#.#########.#.#########.#########.#.###.#####.#.#.###
#.#.#.#.#.#.#...#...#...#...#.#.#.....#P#...#.#...#...#...#.#.#.....#.#...#.#...#P....#P.....P#.#.......#......P#.#.....#.....#...#.#.P.#...#.........#.....#.#.....#.#...#.......#.....#...#.#P#...#.#.#...#.....#.........#...#.....#...#...#.....#.#...#
#.#.#.#.#.#.#.###.#.###.#####.#.#####.#.###.#.###.#######.#.#.#.#####.#####.###.#.#.#.#####.###.###.#####.###.###.#################.###.###.###############.#####.#.#.###.#####.###.#.#.#.#.#.###.###.###.#.#.#######.#####.###.#.#.#######.###.#####.###.#
#...#.#.#.#...#...#.........#...#...#.#.#...#...#.#.......#.#...#....P#...#...#.#.#.#.....#...#...#.....#...#P#...#.........#.....#...#...#...#...#........P#...#.#.#...#.....#.....#.#...#.#...#...#.#...#...#.....#.#...#.#...#.#.......#...#.#...#.#...#
#.#####.#.###.#.#################.###.#.#.#####.#.#.#######.#####.#####.#.#.#.#.###.#####.###.###.#####.###.###.###.#######.#.###.###.#.#####.#.#.###########.#.###.#.#######.#######.#####.###.###.#.#.#########.#.###.#.#.#.###.###.#######.#.#.###.#.#.#
#.......#P....#............P............#.......#...#.............#.....#...#.......#.......#.............#....P....#.........#.......#.........#.............#.....#.................#.......#....P#.............#.....#...#......P#...........#.......#.#
###########################################################################################################################################################################################################################################################`)).toBe(232295)
	})
})
